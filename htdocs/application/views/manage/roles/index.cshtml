@{
use Scabbia\Extensions\Http\Http;
use Scabbia\Extensions\Helpers\Html;
use Scabbia\Extensions\Session\Session;
use Scabbia\Extensions\Views\Views;
use App\Includes\ViewHelpers;
}
@Views::viewFile('{app}views/shared/header.cshtml')
@Views::viewFile('{app}views/shared/nav/manage.cshtml', $model)

<section id="main">
    <div class="top-nav">
        <div class="container-fluid">
            <div class="row-fluid search-button-bar-container">
                <div class="span12">
                    <ul class="breadcrumb">
                        <li><a href="#"><i class="icon-home"></i> Some</a></li>
                        <li><a href="#">Nice</a></li>
                        <li><a href="#">Breadcrumbs</a></li>
                        <li class="active"><a href="#">Here</a></li>
                    </ul>
                    <a class="search-button-trigger" href="#"><i class="icon-search"></i></a>
                </div>
            </div>

            <div class="row-fluid search-bar-nav">
                <div class="span12">
                    <form>
                        <input type="text" class="search" placeholder="Search...">
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid">
        <div class="row-fluid">
            <div class="span12">
                @if (!is_null($alert = Session::getFlash('alert'))) {
                <div class="alert alert-@$alert[0]">
                    @$alert[1]
                </div>
                }

                <div class="box " style="position:relative;">
                    <div class="tab-header" > Role List
                    </div>

                    <div class="tab-pane padded">

                        <div class="dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi" style="margin-bottom:-20px;">
                            @Html::pager(array(
                                'total' => $dataCount,
                                'pagesize' => $pageSize,
                                'current' => $page + 1,
                                'firstlast' => false,
                                'link' => '<span><a href="' . Http::url('manage/roles/index/{page}') . '" tabindex="0" class="fg-button ui-button ui-state-default">{pagetext}</a></span>',
                                'activelink' => '<span><a tabindex="0" class="fg-button ui-button ui-state-default">{pagetext}</a></span>'
                            ))
                        </div>

                        <div class="pull-right">
                            <a href="@Http::url('manage/roles/add')">
                                <button type="submit" class="button blue">Role Add</button>
                            </a>
                        </div>
                    </div>
                    <table class="table table-striped">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Create Project</th>
                            <th>Create User</th>
                            <th>Delete User</th>
                            <th>Administer</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        @foreach ($data as $role) {
                        <tr class="gradeX">
                            <td>@$role['name']</td>
                            <td>@ViewHelpers::printBool($role['createproject'])</td>
                            <td>@ViewHelpers::printBool($role['createuser'])</td>
                            <td>@ViewHelpers::printBool($role['deleteuser'])</td>
                            <td>@ViewHelpers::printBool($role['administer'])</td>
                            <td><div class="btn-group pull-right">

                                    <a href="@Http::url('manage/roles/edit/' . $role['id'])" class="button blue">Edit</a>

                                    <a href="@Http::url('manage/roles/remove/' . $role['id'])" class="remove-button button red">Delete</a>

                                </div></td>
                        </tr>
                        }
                        </tbody>
                    </table>
                    <div class="form-actions"> </div>
                </div>
            </div>
        </div>
        <div class="row-fluid">
            <div class="span12">
                <div class="footer">
                    <div>2012 &copy; Plastique Admin Theme</div>
                </div>
            </div>
        </div>
    </div>
</section>

<script type="text/javascript">
    $l.ready(
        $l.dom.setEvent(
            $l(['.remove-button']),
            'click',
            function(ev, elem) {
                if (!confirm('Are you sure to delete this record?')) {
                    return false;
                }
            }
        )
    );
</script>

@Views::viewFile('{app}views/shared/footer.cshtml')